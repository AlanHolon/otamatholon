<script>
    let ctx = new AudioContext();
    let l = window.innerHeight;
    let m = window.innerWidth;
    let o = {};
    let os = {};
    let od = {};
    let g = {};
    let gm = {};
    function fr(x) {
        return 220 * l / (l - x * 7 / 8);
    }
    function mo(x) {
        return 5 * x / m;
    }
    function oscinit(event) {
        const t = ctx.currentTime;
        o[event.id] = ctx.createOscillator();
        g[event.id] = ctx.createGain();
        const f = fr(event.clientY);
        let osc = o[event.id];
        let gain = g[event.id];
        osc.frequency.value = f;
        osc.type = "sine";
        gain.gain.value = 0.01;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.exponentialRampToValueAtTime(5, t + 0.02);
        osc.start();
        document.getElementById("pad").innerHTML = f+"Hz";
        gm[event.id] = ctx.createGain();
        gm[event.id].gain.value = 0.01;
        gm[event.id].connect(ctx.destination);
        os[event.id] = ctx.createOscillator();
        os[event.id].type = "sine";
        os[event.id].frequency.value = f - 10;
        os[event.id].connect(gm[event.id]);
        od[event.id] = ctx.createOscillator();
        od[event.id].type = "sine";
        od[event.id].frequency.value = f + 10;
        od[event.id].connect(gm[event.id]);
        os[event.id].start();
        od[event.id].start();
        return false;
    }
    function oscplay(event) {
        const t = ctx.currentTime;
        const f = fr(event.clientY);
        o[event.id].frequency.linearRampToValueAtTime(f, t + 0.01);
        os[event.id].frequency.linearRampToValueAtTime(f - 10, t + 0.01);
        od[event.id].frequency.linearRampToValueAtTime(f + 10, t + 0.01);
        gm[event.id].gain.exponentialRampToValueAtTime(mo(event.clientX), t + 0.5);
        document.getElementById("pad").innerHTML = f+"Hz";
        return false;
    }
    function oscend(event) {
        const t = ctx.currentTime;
        g[event.id].gain.exponentialRampToValueAtTime(0.01, t + 0.5);
        gm[event.id].gain.exponentialRampToValueAtTime(0.01, t + 0.5);
        o[event.id].stop(t + 0.5);
        os[event.id].stop(t + 0.5);
        od[event.id].stop(t + 0.5);
        delete o[event.id];
        delete os[event.id];
        delete od[event.id];
        delete g[event.id];
        delete gm[event.id];
        return false;
    }
</script>

<body>
    <div id="pad" style="user-select: none; touch-action:none; position: absolute; left: 0; top: 0; height: 100vh; width:100vw; background-color:blue;">
    </div>
</body>

<script>
   function calc() {
       l = document.getElementById("pad").offsetHeight;
   }
   l = document.getElementById("pad").offsetHeight;
   document.getElementById("pad").onpointerdown = oscinit;
   document.getElementById("pad").onpointermove = oscplay;
   document.getElementById("pad").onpointerup = oscend;
   document.getElementById("pad").onpointerout = oscend;
   window.onresize = calc;
</script>

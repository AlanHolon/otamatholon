<script defer>
    let ctx = new AudioContext();
    let osc;
    let gain;
    let l = window.innerHeight;
    function fr(x) {
        return 220 * l / (l - x * 3 / 4);
    }
    function oscinit(event) {
        const f = fr(event.clientY);
        osc = ctx.createOscillator();
        gain = ctx.createGain();
        osc.frequency.value = f;
        osc.type = "sine";
        gain.gain.value = 0.1;
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start(0);
        gain.gain.linearRampToValueAtTime(1, 2);
        document.getElementById("pad").innerHTML = f+"Hz";
        return false;
    }
    function oscplay(event) {
        const t = ctx.currentTime;
        const f = fr(event.clientY);
        osc.frequency.linearRampToValueAtTime(f, t + 0.01);
        document.getElementById("pad").innerHTML = f+"Hz";
        return false;
    }
    function oscend() {
        osc.stop();
        osc = undefined;
        return false;
    }
</script>

<body>
    <div id="pad" style="user-select: none; touch-action:none; position: absolute; left: 0; top: 0; height: 100vh; width:100vw; background-color:blue;">
    </div>
</body>

<script>
   function calc() {
       l = document.getElementById("pad").offsetHeight;
   }
   l = document.getElementById("pad").offsetHeight;
   document.getElementById("pad").onpointerdown = oscinit;
   document.getElementById("pad").onpointermove = oscplay;
   document.getElementById("pad").onpointerup = oscend;
   document.getElementById("pad").onpointerout = oscend;
   window.onresize = calc;
</script>
